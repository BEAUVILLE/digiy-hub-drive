<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>DIGIY J√ãF ‚àû ‚Äî Apprenti (T√©l√©phone + PIN)</title>
  <meta name="theme-color" content="#071a12" />

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- STYLE MOBILE FIRST -->
  <style>
    :root{
      --bg:#020617;
      --card:rgba(255,255,255,.05);
      --line:rgba(148,163,184,.28);
      --ink:#f9fafb;
      --muted:#cbd5e1;
      --green:#22c55e;
      --gold:#facc15;
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,sans-serif;
      background:
        radial-gradient(800px 500px at 10% -10%, rgba(34,197,94,.18), transparent 60%),
        linear-gradient(180deg,#071a12,var(--bg));
      color:var(--ink);
      min-height:100vh;
    }
    .wrap{
      max-width:520px;
      margin:0 auto;
      padding:14px;
      display:flex;
      flex-direction:column;
      gap:14px;
    }
    .card{
      border:1px solid var(--line);
      background:var(--card);
      border-radius:var(--radius);
      padding:16px;
    }
    h1{
      margin:0;
      font-size:1.4rem;
      font-weight:1000;
      text-align:center;
    }
    .sub{
      text-align:center;
      margin-top:8px;
      color:var(--muted);
      font-weight:900;
      font-size:1rem;
      line-height:1.4;
    }
    label{
      display:block;
      margin:12px 0 6px;
      font-weight:1000;
      font-size:1rem;
    }
    input,select,textarea{
      width:100%;
      min-height:52px;
      padding:12px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.2);
      color:var(--ink);
      font-size:1rem;
      font-weight:900;
    }
    textarea{min-height:120px;resize:vertical}
    .btn{
      width:100%;
      min-height:56px;
      border-radius:16px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.06);
      color:var(--ink);
      font-size:1.05rem;
      font-weight:1000;
      cursor:pointer;
      margin-top:10px;
    }
    .btn.primary{
      background:rgba(34,197,94,.22);
      border-color:rgba(34,197,94,.35);
      color:#bbf7d0;
    }
    .btn.ghost{background:rgba(255,255,255,.02)}
    .btn.small{
      padding:12px;
      min-height:48px;
      font-size:1rem;
      border-radius:14px;
    }
    .note{
      margin-top:10px;
      font-weight:900;
      font-size:.95rem;
      color:var(--muted);
    }
  </style>
</head>

<body>

  <div class="wrap">

    <!-- RETOUR -->
    <button class="btn ghost small" onclick="location.href='digiy-jef.html'">
      ‚Üê Retour J√ãF
    </button>

    <!-- HEADER -->
    <div class="card">
      <h1>üë®üèæ‚Äçüéì Je cherche un apprentissage</h1>
      <div class="sub">
        Plomberie ‚Ä¢ √âlectricit√© ‚Ä¢ M√©canique ‚Ä¢ Vente ‚Ä¢ M√©tiers de bouche<br>
        T√©l√©phone + PIN ‚Ä¢ Simple ‚Ä¢ Humain
      </div>
    </div>

    <!-- FORMULAIRE -->
    <div class="card">
      <label>Ton pr√©nom</label>
      <input id="name" placeholder="ex: Moussa">

      <label>M√©tier recherch√©</label>
      <select id="trade">
        <option value="">‚Äî Choisir ‚Äî</option>
        <option>Plomberie</option>
        <option>√âlectricit√©</option>
        <option>M√©canique</option>
        <option>Vente</option>
        <option>M√©tier de bouche</option>
        <option>Autre</option>
      </select>

      <label>Ville / Quartier</label>
      <input id="city" placeholder="ex: Dakar, Pikine">

      <label>T√©l√©phone (WhatsApp)</label>
      <input id="phone" placeholder="+221 77 123 45 67">

      <label>PIN (4 chiffres)</label>
      <input id="pin" type="number" placeholder="ex: 1234">

      <label>Petite description</label>
      <textarea id="bio" placeholder="Motiv√©, s√©rieux, disponible..."></textarea>

      <button class="btn primary" onclick="saveLocal()">
        üì§ Publier mon profil
      </button>

      <div id="msg" class="note"></div>
    </div>

  </div>

  <!-- JS SIMPLE (V1 local) -->
  <script>
    function saveLocal(){
      const profile = {
        name: name.value.trim(),
        trade: trade.value,
        city: city.value.trim(),
        phone: phone.value.trim(),
        bio: bio.value.trim(),
        pin: pin.value.trim(),
        created_at: new Date().toISOString()
      };

      if(!profile.name || !profile.trade || !profile.phone || profile.pin.length < 4){
        msg.textContent = "‚ùå Remplis au minimum pr√©nom, m√©tier, t√©l√©phone et PIN.";
        return;
      }

      localStorage.setItem("digiy_jef_apprenti", JSON.stringify(profile));
      msg.textContent = "‚úÖ Profil enregistr√©. Visible localement (V1).";
    }
  </script>

</body>
</html>
